<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CDN front test</title>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
  </head>
  <body>
    <button id="send-btn">Send echo</button>
    <hr />
    <div id="board">Wait server data...</div>

    <script type="text/javascript">
      const board = document.getElementById("board");
      const sendButton = document.getElementById("send-btn");

      const sock = new SockJS("http://0.0.0.0:9999/echo");
      sock.onopen = () => {
        console.log("socket open!");
        board.textContent = "socket opened";
      };

      sock.onmessage = (param) => {
        console.log("message", param.data);
        board.textContent = `get message: ${param.data}`;
      };

      sendButton.onclick = () => {
        sock.send("Hello, server!");
      };
    </script>
  </body>
</html>
